{% extends 'base.html' %}

{% block content %}
    <h2>{{ course.name }}</h2>
    <p>{{ course.description }}</p>

    {% if user.is_teacher and course.teacher == user.teacher %}
        <a href="{% url 'edit_course' course.id %}">Edit Course</a> | 
        <a href="{% url 'delete_course' course.id %}" onclick="return confirm('Are you sure you want to delete this course?')">Delete Course</a> | 
        {% if course.enrollment_status == 'open' %}
            <a href="{% url 'close_enrollment' course.id %}" onclick="return confirm('Are you sure you want to close enrollment for this course?')">Close Enrollment</a>
        {% endif %}
    {% endif %}

    <h3>Materials</h3>
    <ul>
        {% for material in materials %}
            <li><a href="{{ material.file.url }}">{{ material.file.name }}</a></li>
        {% endfor %}
    </ul>

    <h3>Enrolled Students</h3>
    <ul>
        {% for student in enrolled_students %}
            <li>{{ student.user.first_name }} {{ student.user.last_name }}</li>
        {% endfor %}
    </ul>
{% endblock %}